<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Wordy 5x5 Online</title>
    
    <link rel="stylesheet" href="style.css"> 
    
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
</head>
<body>
    
  <div id="lobbyPanel" class="panel">
      
<div class="header-top-row">
        <h1 class="game-title">5x5 Word Game</h1>
        
    <div class="language-selector">
    
    <a href="/tr/index.html" class="lang-btn small-flag" title="T√ºrk√ße Versiyon">
        <img src="https://flagcdn.com/w80/tr.png" alt="TR">
    </a>
    
    <a href="#" class="lang-btn small-flag active" title="English Version">
        <img src="https://flagcdn.com/w80/us.png" alt="EN">
    </a>

    </div>
    </div>

        <div class="lobby-top-actions">
            <button id="howToPlayBtn" class="icon-btn info" onclick="window.openInfoModal()" title="How to Play?">?</button>
            <button id="statsBtn" class="icon-btn stats" onclick="window.openStatsModal()" title="Statistics">üìä</button>
            <button id="darkModeBtn" class="icon-btn" onclick="toggleDarkMode()" title="Toggle Theme">üåô</button>
        </div>
        
        <div class="lobby-controls">
            
            <div class="control-group">
                <p class="group-title">CREATE MULTIPLAYER GAME</p>
                <div class="mode-buttons">
                    <button class="btn-mode classic" onclick="createNewGame('CLASSIC')">
                        <span class="mode-icon">üÖ∞Ô∏è</span>
                        <span class="mode-name">CLASSIC</span>
                    </button>
                    
                    <button class="btn-mode random" onclick="createNewGame('RANDOM')">
                        <span class="mode-icon">üé≤</span>
                        <span class="mode-name">RANDOM</span>
                    </button>
                </div>
            </div>
           
            <div class="control-group">
                <p class="group-title">JOIN A GAME</p>
                <div class="join-area">
                    <input type="text" id="gameCodeInput" placeholder="ROOM CODE" maxlength="4">
                    <button id="joinGameBtn" onclick="joinGame()">JOIN</button>
                </div>
            </div>
            
            <div class="control-group">
                <p class="group-title">SINGLE PLAYER</p>
                <div class="mode-buttons">
                    <button class="btn-mode random" onclick="startSinglePlayerGame('RANDOM')">
                        <span class="mode-icon">üé≤</span>
                        <span class="mode-name">RANDOM</span>
                    </button>
                </div>
            </div>

        </div>
        <div id="lobbyStatus" class="status-error"></div>
    </div>
        
    <div id="gamePanel" class="panel hidden">
        <div class="game-header">
            <div class="room-info">Room: <b id="gameCodeDisplay">--</b></div>
            
            <div id="turnStatusBadge" class="status-badge hidden">Loading...</div>
            
            <div id="gameTimer" class="game-timer hidden">20</div>
        </div>
        
        <div class="game-container">
        <div id="randomGameInfoArea" class="random-info-wrapper hidden">
            <div id="randomLetterDisplay" class="random-letter-box">?</div>

            <div id="remainingStatsBox" class="stats-box">
                <div class="stats-title">Remaining letters</div>
                <div class="stats-row">Vowels: <span id="vowel-count">0</span></div>
                <div class="stats-row">Consonants: <span id="consonant-count">0</span></div>
            </div>
        </div>

        <div class="grid-section hidden-during-game" id="opponentSection">
            <div id="opponentGrid" class="grid locked"></div>
        </div>

        <div class="grid-section">
            <div id="myGrid" class="grid"></div>
        </div>

        <div class="controls-section">
            <div id="classicLetterSelectionArea" class="hidden">
                <p class="section-label">Pick a letter and confirm:</p>
                <div id="classicAlphabetContainer" class="alphabet-wrapper"></div>
                <button id="confirmLetterBtn" class="confirm-btn" onclick="submitClassicLetter()" disabled>CONFIRM</button>
            </div>
        </div>
    </div>
</div>
        
    <div id="gameOverPanel" class="panel hidden">
        <h3 id="finalResultMsg" class="result-message">Determining Winner...</h3>
             
        <div class="results-container">
            <div class="result-card">
                <div class="card-header">
                    <h4 id="resultTitleA">Host (A)</h4>
                    <div class="final-score" id="scoreA">0</div>
                </div>
                
                <div class="card-body">
                    <div class="mini-grid-wrapper">
                        <div id="finalGridA" class="grid mini-grid"></div>
                    </div>
                    
                    <div class="word-list-wrapper">
                        <h5>Words Found</h5>
                        <ul id="wordsListA" class="word-list"></ul>
                    </div>
                </div>
            </div>

            <div class="result-card">
                <div class="card-header">
                    <h4 id="resultTitleB">Guest (B)</h4>
                    <div class="final-score" id="scoreB">0</div>
                </div>
                
                <div class="card-body">
                    <div class="mini-grid-wrapper">
                        <div id="finalGridB" class="grid mini-grid"></div>
                    </div>
                    
                    <div class="word-list-wrapper">
                        <h5>Words Found</h5>
                        <ul id="wordsListB" class="word-list"></ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="panel-footer">
            <button id="restartBtn" onclick="window.location.reload()">PLAY AGAIN</button>
        </div>
    </div>

    <div id="howToPlayModal" class="modal hidden">
        <div class="modal-content">
            <span class="close-modal" onclick="window.closeInfoModal()">&times;</span>
            <h2 style="color:#2c3e50; text-align:center;">HOW TO PLAY?</h2>
            <div class="rules-text">
                <h3>üéØ Objective</h3>
                <p>Create meaningful horizontal or vertical words on the 5x5 grid using given letters to collect the highest score.</p>

                <h3>üïπÔ∏è Game Modes</h3>
                <ul>
                    <li><strong>Classic Mode:</strong> Players take turns picking a letter. Both players must place the chosen letter on their grid.</li>
                    <li><strong>Random Mode:</strong> The system provides random letters. Speed and strategy are key.</li>
                    <li><strong>Single Player:</strong> Play with random letters to beat your own high score.</li>
                </ul>

                <h3>‚≠ê Scoring</h3>
                <ul>
                    <li><strong>5 Letters:</strong> 15 Points (Grand Prize!)</li>
                    <li><strong>4 Letters:</strong> 9 Points</li>
                    <li><strong>3 Letters:</strong> 5 Points</li>
                    <li><strong>2 Letters:</strong> 2 Points</li>
                </ul>

                <h3>üÉè Joker Rule</h3>
                <ul>
                    <li>After placing 24 letters, you get a <strong>JOKER</strong> for the final 25th square. You can pick any letter you want to change the course of the game!</li>
                </ul>
            </div>
        </div>
    </div>

    <div id="statsModal" class="modal hidden" style="display: none;">
    <div class="modal-content" style="max-width: 500px;">
        <span class="close-modal" onclick="window.closeStatsModal()">&times;</span>
        <h2 style="color:#8e44ad; text-align:center; margin-top:0;">RANDOM MODE STATS</h2>
        
        <div class="stats-container">
            <div class="stat-box" style="width: 120px;">
                <span id="statLifeTimeAvg" class="stat-number">-</span>
                <span class="stat-label">Total Avg.</span>
            </div>
            <div class="stat-box" style="width: 120px;">
                <span id="statLast10Avg" class="stat-number">-</span>
                <span class="stat-label">Last 10 Avg.</span>
            </div>
        </div>

        <div class="leaderboard-section">
            <h3 style="text-align:center; color:#2c3e50; margin-bottom: 10px;">üèÜ MONTHLY LEADERS üèÜ</h3>
            <p style="text-align:center; font-size:0.8rem; color:#7f8c8d; margin-top:-10px;">(Min. 10 games played)</p>
            
            <table class="leaderboard-table">
                <thead>
                    <tr>
                        <th width="15%">#</th>
                        <th width="50%">Player</th> <th width="35%">Average</th>
                    </tr>
                </thead>
                <tbody id="leaderboardBody">
                    <tr><td colspan="3">Loading...</td></tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

    <div id="definitionModal">
    <span class="close-def" onclick="closeDefinition()">‚úï Close</span>
    <h3 id="defTitle">Word</h3>
    <div id="definitionBody">Loading...</div>
</div>
    
    <script src="script.js"></script>
</body>
</html>
